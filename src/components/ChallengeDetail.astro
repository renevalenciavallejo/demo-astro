---
import { getLangFromUrl, useTranslations } from "src/i18n/utils";

const { challenge } = Astro.props;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const { Content } = await challenge.render();

const pot =
  challenge.data.pot !== null && challenge.data.pot > 0
    ? `$${challenge.data.pot} USD`
    : null;

const entryFee =
  challenge.data.entryFee > 0
    ? `$${challenge.data.entryFee} USD`
    : `${t("challenge-detail.entryFeeFree")}`;
---

<section class="flex flex-col lg:flex-row px-4 md:px-14 bg-black text-white">
  <div
    class="lg:w-8/12 lg:flex-grow-3 lg:border-r lg:border-opacity-25 lg:border-white lg:pb-0 pb-11 lg:pr-16 border-opacity-25 border-b lg:border-b-0 border-white"
  >
    <div
      class="prose prose-h2:text-2xl prose-h2:text-white prose-h2:font-bold prose-p:text-base prose-p:text-white prose-p:font-normal prose-ul:text-white"
    >
      <Content />
    </div>
  </div>

  <div class="mt-12 lg:mt-0 lg:pl-16 w-full lg:w-1/3">
    {
      pot && (
        <>
          <h2 class="text-2xl text-white font-bold box-border pb-3">
            {t("challenge-detail.pot")}
          </h2>
          <div class="w-full">
            <div class="flex flex-row items-center gap-3">
              <span class="text-white font-bold text-xl">{pot}</span>
            </div>
          </div>

          <div class="my-6 border border-opacity-25 border-white w-40" />
        </>
      )
    }

    <h2 class="text-2xl text-white font-bold box-border pb-3">
      {t("challenge-detail.entryFee")}
    </h2>

    <div class="w-full">
      <div class="flex flex-row items-center gap-3">
        <span class="text-white font-bold text-xl">{entryFee}</span>
      </div>
    </div>

    <div class="my-6 border border-opacity-25 border-white w-40"></div>
  </div>
</section>
